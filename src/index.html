<html>
	<head>
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
		<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
		<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<style>
			body { background: #eee; }
			.mdl-card.main-content { width:90%; }
			.pitchArea {
					width:100%;
					-webkit-box-sizing: border-box;
						 -moz-box-sizing: border-box;
									box-sizing: border-box;
			}
		</style>
		<script>
			function $(id){
				var ident = id.slice(1);
				if(id.match(/^\#/)) return document.getElementById(ident);
				if(id.match(/^\./)) return document.getElementsByClassName(ident);
			}

			function getUserFrom(api){
				console.log("ready to retrieve");
				url = window.location.href.split("?");
				screen_name = url[url.length-1];
				axios
					.get(api+"/users/"+screen_name)
					.then(function(result){
						var user = result.data;
						$("#user-name").innerHTML=user.first_name+" "+user.last_name;
						$("#user-avatar").src=(user.avatar_url || "default.png");
						$("#email-domain").innerHTML=user.privatized_email;
						$("#user-bio").innerHTML=user.bio;
						$("#company-name").innerHTML=(user.companyName||"");
						//$("user-title").innerHTML=user.title
						var update_name = $(".substitute-variable")
						for(var i=0; i<update_name.length; i++){
							var body = update_name[i].innerHTML
							update_name[i].innerHTML = body.replace("{{user-first-name}}", user.first_name);
						}
					})
			}
		</script>
	</head>
	<body onLoad="getUserFrom('http://localhost:3000/pitches/v1')">
		<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
			<header class="mdl-layout__header">
				<div class="mdl-layout__header-row">
					<!-- Title -->
					<span class="mdl-layout-title">LOGO GOES HERE</span>
				</div>
			</header>

			<main class="mdl-layout__content">

				<div class="mdl-grid">

					<div class="mdl-cell mdl-cell--3-col">

						<div class="mdl-card">
							<div>
								<img id="user-avatar" alt="username profile image">
							</div>
							<div class="mdl-card__supporting-text">
								<div id="user-name"></div>
								<div id="company-name"></div>
								<div id="user-title"></div>
								<div>Verified Email Address:</div>
								<div>--------<span id="email-domain"></span></div>
								<div id="user-bio"></div>
							</div>
						</div><!-- profile description card -->

						<div class="mdl-card" style="top:25px">
							<div class="mdl-card__title">
								<h6 class="mdl-card__title-text">
									What is a Priority Pitch?
								</h6>
							</div>
							<ul class='mdl-card__supporting-text mdl-list'>
								<li class="substitute-variable mdl-list__item">Fill out the form to submit your meeting to {{user-first-name}}</li>
								<li class="mdl-list__item">$8 is charged to your card when you submit your bid</li>
								<li class="substitute-variable mdl-list__item">Pitch is shown to {{user-first-name}}</li>
							</ul>
						</div><!-- service description card -->

					</div><!-- left panel -->

					<div class="mdl-cell mdl-cell--9-col">
						<div class="main-content mdl-card">

							<div class="mdl-card__title">
								<h6 class="mdl-card__title-text">
									Your Pitch
								</h6>
							</div><!-- title -->

							<div class='mdl-card__supporting-text'>
								<div class="mdl-grid">
									<div class="mdl-cell mdl-cell--6-col">
										<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
											<input type="text" id="user" class="mdl-textfield__input">
											<label for="user" class="mdl-textfield__label">First Name</label>
										</div>
									</div>
									<div class="mdl-cell mdl-cell--6-col">
										<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
											<input type="text" id="user" class="mdl-textfield__input">
											<label for="user" class="mdl-textfield__label">Last Name</label>
										</div>
									</div>
								</div>
								<div class="mdl-grid">
									<div class="mdl-cell mdl-cell--12-col">
										<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
											<input type="text" id="user" class="mdl-textfield__input">
											<label for="user" class="mdl-textfield__label">Email Address</label>
										</div>
									</div>
								</div>
								<div class="mdl-grid">
									<div class="mdl-cell mdl-cell--12-col">
										<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
											<input type="text" id="user" class="mdl-textfield__input">
											<label for="user" class="mdl-textfield__label">Company Name</label>
										</div>
									</div>
								</div>
								<div class="mdl-grid">
									<div class="mdl-cell mdl-cell--8-col">
										<label class="substitute-variable">Explain your product or service and why {{user-first-name}} might be interested</label>
									</div>
									<div class="mdl-layout-spacer"></div>
									<div class="mdl-cell mdl-cell--1-col">
										(0/700)
									</div>
									<div class="mdl-cell mdl-cell--12-col">
										<textarea class="pitchArea" rows="10"></textarea>
									</div>
								</div>
								<div class="mdl-grid">
									<div class="mdl-cell mdl-cell--12-col">
										<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
											<input type="text" id="user" class="mdl-textfield__input">
											<label for="user" class="mdl-textfield__label">Bid Amount</label>
										</div>
									</div>
								</div>
								<div class="mdl-grid">
									<div class="mdl-layout-spacer"></div>
									<div class="mdl-cell mdl-cell--2-col">
										<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
											<button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored">
												Submit Bid
											</button>
										</div>
									</div>
								</div>
							</div><!-- supporting-text -->

						</div> <!-- pitch form card -->

					</div> <!-- 9-wide mdl cell -->
				</div> <!-- mdl grid -->
			</main> <!-- area under header -->
		</div> <!-- mdl main content wrapper -->
	</body>
</html>
