<html>
	<head>
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
		<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
		<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<style>
			.hidden { display:none; }
    </style>
    <script>
			function $(id, element, log){
				var ident = id.slice(1);
				if(id.match(/^\#[^\.]*$/)) return document.getElementById(ident);
				if(id.match(/^\./)) return document.getElementsByClassName(ident);
				return document.querySelectorAll(ident);
			}

      function setup(api){
				url = window.location.href.split("?");
				bid = JSON.parse(atob(url[url.length-1]));
				axios.post(api+"/users/"+bid.id+"/pitch", bid)
         .then(function(){
            $("#bid-form-submit-pending").classList.add("hidden")
            $("#bid-form-submit-success").classList.remove("hidden")
          })
          .catch(function(){
            $("#bid-form-submit-pending").classList.add("hidden")
            $("#bid-form-submit-failure").classList.remove("hidden")
          })
      }
    </script>
  </head>
	<body onLoad="setup('http://localhost:3000/pitches/v1')">
    <div id="bid-form-submit" class="main-content mdl-card">
      <span id="bid-form-submit-pending">Pending...</span>
      <span id="bid-form-submit-success" class="hidden" >Success!</span>
      <span id="bid-form-submit-failure" class="hidden" >Failure :(</span>
    </div>
  </body>
</html>

